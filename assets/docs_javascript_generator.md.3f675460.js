import{_ as s,o as n,c as a,a as l}from"./app.aeae85a6.js";const A=JSON.parse('{"title":"迭代器","description":"","frontmatter":{},"headers":[{"level":2,"title":"说明","slug":"说明","link":"#说明","children":[]},{"level":2,"title":"打破完整运行","slug":"打破完整运行","link":"#打破完整运行","children":[]},{"level":2,"title":"输入和输出","slug":"输入和输出","link":"#输入和输出","children":[]}],"relativePath":"docs/javascript/generator.md"}'),o={name:"docs/javascript/generator.md"},p=l(`<h1 id="迭代器" tabindex="-1">迭代器 <a class="header-anchor" href="#迭代器" aria-hidden="true">#</a></h1><h2 id="说明" tabindex="-1">说明 <a class="header-anchor" href="#说明" aria-hidden="true">#</a></h2><p>可以迭代对象可以使用 <code>Symbol.iterator</code> 作为键来查看是否可以进行迭代，这个在实际开发中并不常用。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">34</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#BABED8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(num[Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">iterator]) </span><span style="color:#676E95;font-style:italic;">// undefined</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr[Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">iterator]) </span><span style="color:#676E95;font-style:italic;">// ƒ values() { [native code] }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 所以 num 是不可迭代的，arr 是可迭代的</span></span>
<span class="line"></span></code></pre></div><p><strong>next()</strong></p><p>迭代器 API 使用 <code>next()</code> 方法可以在迭代器中遍历数据，每次成功调用 <code>next()</code> 都会返回一个 <code>IteratorResult</code> 对象，对象中有两个键值，其中 <code>value</code> 是当前迭代的值，<code>done</code> 是否完成迭代(布尔值)，<code>done</code> 为 <code>true</code> 时，表示当前迭代已经被耗尽，<code>value</code> 返回 <code>undefined</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">34</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#BABED8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> arr_ </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> arr[Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">iterator]()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: 1, done: false}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: 2, done: false}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: 34, done: false}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: 5, done: false}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: 5, done: false}</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(arr_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()) </span><span style="color:#676E95;font-style:italic;">// {value: undefined, done: true}</span></span>
<span class="line"></span></code></pre></div><h1 id="生成器" tabindex="-1">生成器 <a class="header-anchor" href="#生成器" aria-hidden="true">#</a></h1><h2 id="打破完整运行" tabindex="-1">打破完整运行 <a class="header-anchor" href="#打破完整运行" aria-hidden="true">#</a></h2><p>我们知道，函数在正常情况下，只有调用了，就要将函数内部所有的代码全部执行，但是想要打破这种原则，就需要的是：<code>生成器</code></p><p>下面例子：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 创建生成器函数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 带有 * 的函数</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">x</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">yield</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 暂停关键字</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">x</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">bar</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">x</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> it </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">// 创建一个迭代器</span></span>
<span class="line"><span style="color:#BABED8;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">// 执行迭代器（执行到底一个暂停之前）</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(x) </span><span style="color:#676E95;font-style:italic;">// 2</span></span>
<span class="line"><span style="color:#82AAFF;">bar</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">// 正常调用了 bar 函数</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(x) </span><span style="color:#676E95;font-style:italic;">// 3</span></span>
<span class="line"><span style="color:#BABED8;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">// 再次启动迭代器 x: 3</span></span>
<span class="line"></span></code></pre></div><blockquote><p>生成器是一种特殊的函数（带有 * 号），可以一次或者多次暂停或启动。</p></blockquote><h2 id="输入和输出" tabindex="-1">输入和输出 <a class="header-anchor" href="#输入和输出" aria-hidden="true">#</a></h2><p>生成器也是一种函数，所以正常的输入和输出都是可以的，只是语法方面会稍有变化</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">a</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">b</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">b</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> it </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">4</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> res </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">()</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value) </span><span style="color:#676E95;font-style:italic;">// 12</span></span>
<span class="line"></span></code></pre></div><p>你可能想不到也可以这样</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;font-style:italic;">yield</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">a</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> it </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">10</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">() </span><span style="color:#676E95;font-style:italic;">// 启动迭代器</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> res </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// 遇到了 yield，再次传入参数启动迭代器</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value)</span></span>
<span class="line"></span></code></pre></div>`,18),e=[p];function t(c,r,y,D,F,i){return n(),a("div",null,e)}const E=s(o,[["render",t]]);export{A as __pageData,E as default};
